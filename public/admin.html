<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #fff; display: flex; flex-direction: column; align-items: center; padding: 50px; }
  input, button { padding: 10px; margin: 5px; border-radius: 5px; border: none; }
  input { width: 200px; }
  button { cursor: pointer; background: #0f0; color: #000; font-weight: bold; }
  .hidden { display: none; }
</style>
</head>
<body>

<h1>Admin Panel</h1>

<div id="loginDiv">
  <input type="password" id="adminPassword" placeholder="Введите пароль" />
  <button onclick="login()">Войти</button>
  <p id="loginMsg"></p>
</div>

<div id="adminActions" class="hidden">
  <h2>Действия</h2>
  <input type="text" id="playerName" placeholder="Имя игрока" />
  <br>
  <button onclick="addLevel()">Добавить уровень</button>
  <button onclick="addFF10()">Добавить 10 FF Diamonds</button>
  <button onclick="addFFTrill()">Добавить триллион FF Diamonds</button>
  <button onclick="addDiamTrill()">Добавить триллион Diamonds</button>
  <p id="actionMsg"></p>
</div>

<script>
const baseURL = window.location.origin;

async function login() {
  const password = document.getElementById('adminPassword').value;
  const res = await fetch(`${baseURL}/admin/login`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ password })
  });
  const data = await res.json();
  if (data.success) {
    document.getElementById('loginDiv').classList.add('hidden');
    document.getElementById('adminActions').classList.remove('hidden');
  } else {
    document.getElementById('loginMsg').innerText = data.error || 'Ошибка входа';
  }
}

async function sendAdminAction(route) {
  const name = document.getElementById('playerName').value;
  if (!name) { document.getElementById('actionMsg').innerText = 'Введите имя игрока!'; return; }
  const res = await fetch(`${baseURL}/admin/${route}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name })
  });
  const data = await res.json();
  document.getElementById('actionMsg').innerText = data.error || 'Действие выполнено!';
}

function addLevel() { sendAdminAction('level'); }
function addFF10() { sendAdminAction('ff10'); }
function addFFTrill() { sendAdminAction('ffTrill'); }
function addDiamTrill() { sendAdminAction('diamTrill'); }
</script>

</body>
</html>
