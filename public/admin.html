<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ê–¥–º–∏–Ω–∫–∞ Diamond Free Fire</title>
<style>
body {
  font-family: 'Arial', sans-serif;
  background: url('https://i.ibb.co/6mQ9T8S/cosmos.jpg') no-repeat center center fixed;
  background-size: cover;
  color: #fff;
  text-align: center;
}
input, textarea {
  padding: 5px;
  margin: 5px;
  border-radius: 5px;
  border: none;
}
button {
  padding: 10px 20px;
  margin: 10px;
  font-size: 16px;
  cursor: pointer;
  border: none;
  border-radius: 5px;
  background: #ff0;
  color: #000;
}
</style>
</head>
<body>
<h1>–ê–¥–º–∏–Ω–∫–∞ Diamond Free Fire</h1>
<div>
  <input type="password" id="adminPass" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
  <button onclick="loginAdmin()">–í–æ–π—Ç–∏</button>
</div>

<div id="adminPanel" style="display:none;">
  <input type="text" id="targetName" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞">
  <input type="number" id="giveDiamonds" placeholder="–ê–ª–º–∞–∑—ã">
  <input type="number" id="giveFFD" placeholder="FF –ê–ª–º–∞–∑—ã">
  <textarea id="message" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ"></textarea>
  <button onclick="modifyPlayer()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
  <h3>–û–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–∏</h3>
  <ul id="playersList"></ul>
</div>

<script>
async function loginAdmin(){
  const pass = document.getElementById('adminPass').value;
  const res = await fetch('/admin/login', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({password: pass}) });
  const data = await res.json();
  if(data.success){
    document.getElementById('adminPanel').style.display='block';
    loadPlayers();
  } else {
    alert(data.error);
  }
}

async function loadPlayers(){
  const res = await fetch('/leaderboard');
  const list = await res.json();
  const ul = document.getElementById('playersList');
  ul.innerHTML='';
  list.forEach(p => ul.innerHTML += `<li>${p.name}: ${p.diamonds} üíé | ${p.ffDiamonds} FFüíé</li>`);
}

async function modifyPlayer(){
  const name = document.getElementById('targetName').value;
  const diamonds = Number(document.getElementById('giveDiamonds').value);
  const ffDiamonds = Number(document.getElementById('giveFFD').value);
  const message = document.getElementById('message').value;

  const res = await fetch('/admin/modify', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({name, diamonds, ffDiamonds, message}) });
  const data = await res.json();
  if(data.error) alert(data.error);
  else {
    alert(`–ò–∑–º–µ–Ω–µ–Ω–æ –¥–ª—è ${data.name}`);
    loadPlayers();
  }
}
</script>
</body>
</html>
